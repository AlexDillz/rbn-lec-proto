<!-- index.html -->
<!--
–ü—Ä–∏–≤–µ—Ç, –∫–æ–≤—ë—Ä–Ω—ã–π –≤–∑–ª–æ–º—â–∏–∫ üëã
–ï—Å–ª–∏ —Ç—ã —á–∏—Ç–∞–µ—à—å —ç—Ç–æ - –∑–Ω–∞—á–∏—Ç, –Ω–∞—à—ë–ª –ø—É—Ç—å –±—ã—Å—Ç—Ä–µ–µ –≤—Å–µ—Ö.

–ù–∞–ø–∏—à–∏ –ü–∞—Ä—Ñ–µ–Ω—é–∫—É –í–∏–∫—Ç–æ—Ä—É –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Ñ—Ä–∞–∑—É:
"–ö–æ–¥ –æ—Ç–∫—Ä—ã—Ç ‚Äî –∞ —Å–µ—Ä–¥—Ü–µ –µ—â—ë –Ω–µ—Ç"

–ó–∞ —ç—Ç–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å –±–æ–Ω—É—Å üòé
-->

<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–®–∫–æ–ª–∞ –í–æ–∂–∞—Ç—Å–∫–æ–≥–æ –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ –û–õ–ê–° ¬´–†–£–ë–ò–ù¬ª</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>–®–∫–æ–ª–∞ –í–æ–∂–∞—Ç—Å–∫–æ–≥–æ –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ –û–õ–ê–° ¬´–†–£–ë–ò–ù¬ª</h1>
    <p>
      –ì–æ—Ä—è—á–∏–π –ø—Ä–∏–≤–µ—Ç –≤—Å–µ–º, –∫—Ç–æ –¥–æ–±—Ä–∞–ª—Å—è —Å—é–¥–∞. –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ –ª–µ–∫—Ü–∏–π –∏ –Ω–µ —Ç–æ–ª—å–∫–æ.
    </p>

    <div class="header-actions">
      <a class="btn btn-secondary" href="lectures/personas.html">
        üë• –ö–æ–º–∞–Ω–¥–∞ –∏ –ª–µ–∫—Ç–æ—Ä—ã
      </a>
    </div>
  </header>

  <button id="theme-toggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô –¢—ë–º–Ω–∞—è —Ç–µ–º–∞</button>

  <main id="list" class="grid"></main>

  <footer><small>v0.7 ¬© PARFENUCHKA, 2025-2026</small></footer>

  <script>
    async function load() {
      try {
        const r = await fetch('lectures.json?v=' + Date.now(), { cache: 'no-store' });
        const data = await r.json();
        const root = document.getElementById('list');
        root.innerHTML = '';

        data.lectures.forEach(L => {
          const el = document.createElement('article');

          // –∑–∞–ª–æ—á–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
          if (L.locked) {
            el.className = 'card card-locked';
            el.innerHTML = `
              <h2>${L.title}</h2>
              <div class="locked-body">
                <p>${L.summary}</p>
              </div>
              <div class="locked-footer">
                <button class="btn locked-btn" type="button" disabled>
                  üîí –°–∫–æ—Ä–æ
                </button>
              </div>
            `;
          }
          // –æ—Ç–∫—Ä—ã—Ç–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
          else {
            el.className = 'card card-clickable';
            // –ø–∞—Ä–∞–º–µ—Ç—Ä from=index
            const lectureUrlWithParam = L.url + (L.url.includes('?') ? '&' : '?') + 'from=index';
            el.innerHTML = `
              <h2>${L.title}</h2>
              <p>${L.summary}</p>
              <a class="btn" href="${lectureUrlWithParam}">–û—Ç–∫—Ä—ã—Ç—å</a>
            `;

            // –¥–µ–ª–∞–µ–º –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º –≤–µ—Å—å –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ (–∫—Ä–æ–º–µ —Å–∞–º–æ–π –∫–Ω–æ–ø–∫–∏/—Å—Å—ã–ª–∫–∏)
            el.addEventListener('click', (e) => {
              if (e.target.closest('a,button')) return;
              if (L.url) window.location.href = lectureUrlWithParam; // –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–π URL
            });
          }

          root.appendChild(el);
        });
      } catch (e) {
        document.getElementById('list').innerHTML =
          '<p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫. –ß—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫)))</p>';
        console.error(e);
      }
    }

    load();
  </script>

  <script src="theme.js" defer></script>
</body>
</html>